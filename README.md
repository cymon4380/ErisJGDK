# ErisJGDK
Мой "набор" для создания Jackbox-подобных игр.
ErisJGDK предоставляет минимальный набор для создания своих игр для вечеринок. В его состав входят:

- WebSocket-сервер (Node.js) *[Текущая версия: **0.9.3**]*;
- Сайт (контроллер) для входа в игру (Express.js) *[Текущая версия: **0.9.8**]*;
- Небольшой пакет на Unity *[Текущая версия: **0.9.0**]*.

Работа над ним началась ещё в июне 2024 года, однако до релиза руки дошли только спустя год.

## О пакете для Unity
Пакет для Unity представляет собой скрипты, позволяющие взаимодействовать с сервером и отправлять данные. Внутри него также находится интерпретация тестового приложения.

Пакет протестирован на версии Unity `2022.3`.

### Установка
Следует распаковать архив `ErisJGDK_Unity.zip` и в менеджере пакетов Unity, выбрав добавление пакета с диска, указать файл `package.json`.

> [!WARNING]
>
> Для работы пакета ErisJGDK требуется установить NuGet-пакеты `WebSocketSharp` и `Newtonsoft.Json`. Это можно сделать, установив [NuGetForUnity](https://github.com/GlitchEnzo/NuGetForUnity/releases).

## Другие платформы и языки программирования
В планах — портирование сервера и контроллера на язык программирования **Python**, как это было в первой игре серии "ЗуМЕМ". Необходимо обеспечить полную совместимость их работы, чтобы их поведение не отличалось от сервера и контроллера, написанных на **Node.js**.

Также есть желание портировать пакет ErisJGDK на другой движок — **Godot**. Однако это не гарантирует выход порта.

## Eris' Humble Pack
*Текущая версия: **0.7.3***

Официальный пак игр, использующий ErisJGDK. Пока доступна одна игра — **ЗуМЕМ 2** *[Текущая версия: **0.9.3**]*. В будущих версиях планируется поддержка пользовательских карточек для неё.

### Настройка подключения

#### Игра
Файл настроек подключения (`connectionSettings.txt`) находится в папке `Eris' Humble Pack_Data` в корне игры. Раскомментируйте, убрав `#` в начале строки, необходимые поля и измените их значения. Ниже приведён пример конфигурации:

```
Host=example.com
Port=2096
WebSocketSuffix=/ws
Url=/createRoom
IsSecuredConnection=true
JoinUrl=example.com
```
- `Host` — адрес сервера (может отличаться от `JoinUrl`);
- `Port` — порт сервера;
- `WebSocketSuffix` — адрес WebSockets, например `wss://example.com:2096/ws/play`. Если не используется, оставьте пустым;
- `Url` — URL для создания комнаты, идущий после суффикса. Используется как в POST-запросе, так и в WebSockets.
- `IsSecuredConnection` — будут ли использоваться защищённые протоколы для WebSockets и POST-запроса (`WSS` и `HTTPS` соответственно). Убедитесь, что вы установили сертификат на сервер и включили поддержку `SSL` в конфигурации;
- `JoinUrl` — URL для входа в игру, отображающийся в лобби.

#### Сайт
URL для подключения находится в файле `static/js/controller.js`. Вероятно, вам потребуется сменить протокол (`ws` → `wss`; `http` → `https`), адрес сервера, порт и суффикс `WebSocket` аналогично файлу настроек игры.
> [!WARNING]
>
> В версии **0.9.8** настройки подключения для сайта хранятся непосредственно в файле конфигурации. Они изменяются аналогично настройкам подключения для игры. Кроме того, хост и порт могут быть переменными среды (`SERVER_HOST` и `SERVER_PORT` соответственно).

#### Переменные среды
Вы можете задать хост и порт через переменные среды. Они по приоритету находятся выше, чем настройки в файле конфигурации.
- Сервер поддерживает задание `HOST` и `PORT`;
- Сайт поддерживает задание `PORT`, а также `SERVER_HOST` и `SERVER_PORT`.